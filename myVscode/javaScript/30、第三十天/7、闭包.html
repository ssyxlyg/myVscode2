<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<div>奇酷教育</div>
		<script>
			/* 
			 垃圾回收机制：垃圾回收器
			    垃圾回收器会定期扫描对象，并计算引用每个对象的其他对象的数量，
			    如果一个对象的被引用数量为0(没有其他对象引用该对象)，那么该对象的内存即可回收 
			内存泄漏：任何对象在您不需要它之后仍然存在，导致它的内存不能使用或无法回收 
			闭包
			  闭包:函数内部再嵌套函数，内部函数被保存到外部
			  闭包特性:
			     函数内部再嵌套函数
				 内部函数可以引用外部函数的变量和参数
				 参数和变量不会被垃圾回收机制回收(常驻内存)，会导致内存泄漏 
				
			致内存泄漏的原因
				由于内部ad引用外部test的活动对象count，即使test销毁了，count仍会在内存中驻留；
				根据垃圾回收机制，被另一对象引用的变量不会被回收，导致内存泄露
				除非内部函数解除对count活动变量的引用，才可以释放内存
			*/
		   
		     function test(){
				 var count=0;
				 function add(step){
					 count+=step;
					 return count;
				 }
				 //打开大门的一个钥匙
				 return add;
			 }
			 
			 var ad=test(); //function add(){}
			 var res=ad(6);
			 console.log(res);
			 
			 box();
			 function box(){
				 var _div=document.querySelector("div");
				 var info=_div.innerText;
				 _div.onclick=function(){
				 	alert(info);
				 }
				 //解除引用
				 _div=null;
			 }
		</script>
	</body>
</html>