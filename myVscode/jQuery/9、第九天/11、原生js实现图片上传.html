<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<input type="file" class="file">
		<button>上传</button>
		<img src="" alt="">
		<script>
			/*
				请求类型:post
				地址:https://520mg.com/ajax/file.php
				参数:formData
				返回值:
			*/
		   var _button=document.querySelector("button");
		   var _file=document.querySelector(".file");
		   var _img=document.querySelector("img");
		   _button.onclick=function(){
			   //获取用户上传的file对象
			   var file=_file.files[0];
			   //打包到formdata对象
			   var formData=new FormData();
			   formData.append("file",file);
			   var xhr=new XMLHttpRequest();
			   xhr.open("post","https://520mg.com/ajax/file.php",true);
			   xhr.send(formData);
			   xhr.onreadystatechange=function(){
				   if(xhr.readyState==4){
					   if(xhr.status==200){
						   //返回结果转换为json对象
						   var res=JSON.parse(xhr.responseText);
						   console.log(res);
						   // res.pic:是图片在服务器上的路径
						   _img.src="https://520mg.com"+res.pic;
					   }
				   }
			   }
		   }
		</script>
	</body>
</html>