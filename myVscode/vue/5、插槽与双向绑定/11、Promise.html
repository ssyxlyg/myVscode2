<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<script>
			/* promise三种状态:
			   pending:等待完成
			   fulfilled:已成功
			   rejected:失败 */
			var p1=new Promise((resolve,reject)=>{
				if(Math.random()>0.5){
					resolve("p1成功");
				}else{
					reject("p1失败")
				}
			})
			console.log(p1);
			
			var p2=new Promise((resolve,reject)=>{
				if(Math.random()>0.5){
					resolve("p2成功");
				}else{
					reject("p2失败")
				}
			})
			
			// res：返回节结果数组,前提是p1,p2结果都是fulfilled
			Promise.all([p1,p2]).then(res=>{
				console.log(res);
			}).catch(err=>{
				console.log(err);
			})
			
			// 返回最快的一个
			Promise.race([p2,p1]).then(res=>{
				console.log(res);
			}).catch(err=>{
				console.log(err);
			})
			
			
				
			function test(){
				if(Math.random()>0.5){
					return  Promise.resolve("成功")
				}else{
					return Promise.reject("失败");
				}
			}	
		    
			var p=test();
			p.then(res=>{
				console.log(res);
			}).catch(err=>{
				console.log(err);
			})
		</script>
	</body>
</html>